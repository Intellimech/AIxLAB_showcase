name: Build and Deploy Showcase

# QUANDO deve partire?
on:
  push:
    branches: ["main"]  # Se il tuo branch si chiama 'master', cambia qui!

# PERMESSI (Serve al robot per scrivere il sito sul branch gh-pages)
permissions:
  contents: write

# LAVORI DA FARE
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest  # Usa un computer Linux virtuale
    
    steps:
      # 1. Scarica il tuo codice
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v4

      # 2. Installa Python
      - name: Setup Python ğŸ
        uses: actions/setup-python@v4
        with:
          python-version: '3.10'

      # 3. Installa le librerie (Jinja2, ecc.)
      - name: Install dependencies ğŸ“¦
        run: |
          pip install -r requirements.txt

      # 4. Lancia il TUO script!
      - name: Run Build Script ğŸ”¨
        run: |
          python build.py

      # 5. Pubblica il risultato
      - name: Deploy to GitHub Pages ğŸš€
        uses: JamesIves/github-pages-deploy-action@v4
        with:
          branch: gh-pages  # Crea questo ramo speciale per il sito
          folder: .         # Pubblica tutto quello che c'Ã¨ nella cartella
          clean: true